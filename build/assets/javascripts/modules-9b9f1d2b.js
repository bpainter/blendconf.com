/**
 * Copyright (c) 2007-2013 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * @author Ariel Flesler
 * @version 1.4.6
 */
!function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var o=e.scrollTo=function(t,o,n){e(window).scrollTo(t,o,n)};o.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},o.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,o=!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!o)return t;var n=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"==n.compatMode?n.body:n.documentElement})},e.fn.scrollTo=function(n,r,i){return"object"==typeof r&&(i=r,r=0),"function"==typeof i&&(i={onAfter:i}),"max"==n&&(n=9e9),i=e.extend({},o.defaults,i),r=r||i.duration,i.queue=i.queue&&i.axis.length>1,i.queue&&(r/=2),i.offset=t(i.offset),i.over=t(i.over),this._scrollable().each(function(){function a(e){c.animate(u,r,i.easing,e&&function(){e.call(this,f,i)})}if(null!=n){var s,l=this,c=e(l),f=n,u={},d=c.is("html,body");switch(typeof f){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(f)){f=t(f);break}if(f=e(f,this),!f.length)return;case"object":(f.is||f.style)&&(s=(f=e(f)).offset())}e.each(i.axis.split(""),function(e,t){var n="x"==t?"Left":"Top",r=n.toLowerCase(),h="scroll"+n,m=l[h],p=o.max(l,t);if(s)u[h]=s[r]+(d?0:m-c.offset()[r]),i.margin&&(u[h]-=parseInt(f.css("margin"+n))||0,u[h]-=parseInt(f.css("border"+n+"Width"))||0),u[h]+=i.offset[r]||0,i.over[r]&&(u[h]+=f["x"==t?"width":"height"]()*i.over[r]);else{var v=f[r];u[h]=v.slice&&"%"==v.slice(-1)?parseFloat(v)/100*p:v}i.limit&&/^\d+$/.test(u[h])&&(u[h]=u[h]<=0?0:Math.min(u[h],p)),!e&&i.queue&&(m!=u[h]&&a(i.onAfterFirst),delete u[h])}),a(i.onAfter)}}).end()},o.max=function(t,o){var n="x"==o?"Width":"Height",r="scroll"+n;if(!e(t).is("html,body"))return t[r]-e(t)[n.toLowerCase()]();var i="client"+n,a=t.ownerDocument.documentElement,s=t.ownerDocument.body;return Math.max(a[r],s[r])-Math.min(a[i],s[i])}}(jQuery),function(e){function t(t,o,n){var r=o.hash.slice(1),i=document.getElementById(r)||document.getElementsByName(r)[0];if(i){t&&t.preventDefault();var a=e(n.target);if(!(n.lock&&a.is(":animated")||n.onBefore&&n.onBefore(t,i,a)===!1)){if(n.stop&&a._scrollable().stop(!0),n.hash){var s=n.offset;s=s&&s.top||s||0;var l=i.id==r?"id":"name",c=e("<a> </a>").attr(l,r).css({position:"absolute",top:e(window).scrollTop()+s,left:e(window).scrollLeft()});i[l]="",e("body").prepend(c),location=o.hash,c.remove(),i[l]=r}a.scrollTo(i,n).trigger("notify.serialScroll",[i])}}}var o=location.href.replace(/#.*/,""),n=e.localScroll=function(t){e("body").localScroll(t)};n.defaults={duration:1e3,axis:"y",event:"click",stop:!0,target:window,reset:!0},n.hash=function(o){if(location.hash){if(o=e.extend({},n.defaults,o),o.hash=!1,o.reset){var r=o.duration;delete o.duration,e(o.target).scrollTo(0,o),o.duration=r}t(0,location,o)}},e.fn.localScroll=function(r){function i(){return!(!this.href||!this.hash||this.href.replace(this.hash,"")!=o||r.filter&&!e(this).is(r.filter))}return r=e.extend({},n.defaults,r),r.lazy?this.bind(r.event,function(o){var n=e([o.target,o.target.parentNode]).filter(i)[0];n&&t(o,n,r)}):this.find("a,area").filter(i).bind(r.event,function(e){t(e,this,r)}).end().end()}}(jQuery);